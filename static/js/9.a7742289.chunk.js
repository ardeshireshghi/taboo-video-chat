(this.webpackJsonptaboo=this.webpackJsonptaboo||[]).push([[9],{209:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var r=n(0),a=n(50),c=n(1),i=function(e){var t=e.displayName,n=e.roomName,a=e.token,i=e.domain,o=void 0===i?"8x8.vc":i,s=Object(r.useRef)(null),u=Object(r.useRef)(null);return Object(r.useEffect)((function(){if(s.current&&!u.current){var e={roomName:"".concat("vpaas-magic-cookie-15ba2c1858914be4913bfa73a6d28bc2","/").concat(n),width:800,height:800,displayName:t,parentNode:s.current,jwt:a};u.current=new window.JitsiMeetExternalAPI(o,e)}}),[s,t,n,a,o]),Object(c.jsx)("div",{ref:s})},o=n(2),s=n(55),u=n(10),p=n(82);function f(){var e=Object(o.h)().chatId,t=Object(u.b)(),n=t.getToken,f=t.getUser,l=n().value,h=Object(p.a)(),d=h.updateChat,b=h.updatedChat,j=h.error,O=f();return Object(r.useEffect)((function(){d(e)}),[e,d]),Object(c.jsxs)(s.a,{children:[b&&Object(c.jsx)(a.p,{children:Object(c.jsx)(a.f,{sm:{size:12,order:2},children:Object(c.jsx)(i,{roomName:e.replace(/-/g,""),displayName:O.context.user.name,token:l})})}),j&&Object(c.jsx)(a.a,{theme:"danger",children:"There was a problem join the chat. Please try again later"})]})}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r="__RUNTIME_CONFIG__",a={};function c(){return r in window?(0===Object.keys(a).length&&(a={apiBaseUrl:window.__RUNTIME_CONFIG__.REACT_APP_API_URL,chatPollIntervalSeconds:window.__RUNTIME_CONFIG__.CHAT_POLL_INTERVAL||10,chatPollingTimeSeconds:300},delete window.__RUNTIME_CONFIG__),a):a}},54:function(e,t,n){"use strict";var r=n(21),a=n(0);t.a=function(e){var t=Object(a.useRef)(!1),n=Object(a.useState)(e),c=Object(r.a)(n,2),i=c[0],o=c[1];return Object(a.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),[i,Object(a.useCallback)((function(e){t.current&&o(e)}),[o])]}},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r,a=n(8),c=n(50),i=n(9),o=Object(i.a)(c.g)(r||(r=Object(a.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 1rem;\n  flex-wrap: wrap;\n  min-height: calc(100% - 92px);\n\n  > *:first-child {\n    flex-basis: auto;\n  }\n"])))},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(15),a=function e(t,n){Object(r.a)(this,e),this.id=t,this.name=n}},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return c}));var r=n(15),a={Pending:"pending",PartialJoin:"partial_join",Fullfilled:"fullfilled"},c=function e(t,n){var a=n.topic,c=n.users,i=n.state,o=n.createdAt,s=n.updatedAt;Object(r.a)(this,e),this.id=t,this.topic=a,this.users=c,this.state=i,this.createdAt=new Date(o),this.updatedAt=new Date(s)}},82:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(51),a=n.n(r),c=n(52),i=n(21),o=n(0),s=n(10),u=n(22),p=n(58),f=n(57),l=n(53);function h(e){return e.map((function(e){var t=new f.a(e.topic.id,e.topic.name);return new p.a(e.id,Object(u.a)(Object(u.a)({},e),{},{topic:t}))}))}function d(e){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=Object(l.a)(),r=t.getToken().value,n.apiBaseUrl){e.next=5;break}throw new Error("apiBaseUrl is not set in config");case 5:return e.next=7,fetch("".concat(n.apiBaseUrl,"/api/v1/chat"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(r)}});case 7:if((c=e.sent).ok){e.next=11;break}throw console.error(c),new Error("Error making request to fetch user chats");case 11:return e.next=13,c.json();case 13:return i=e.sent,e.abrupt("return",h(i));case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Error fetching chats",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function j(e){var t=new f.a(e.topic.id,e.topic.name);return new p.a(e.id,Object(u.a)(Object(u.a)({},e),{},{topic:t}))}function O(e,t){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(t,n){var r,c,i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=Object(l.a)(),c=n.getToken().value,r.apiBaseUrl){e.next=5;break}throw new Error("apiBaseUrl is not set in config");case 5:return e.next=7,fetch("".concat(r.apiBaseUrl,"/api/v1/chat/").concat(t),{method:"PUT",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(c)}});case 7:if((i=e.sent).ok){e.next=11;break}throw console.error(i),new Error("Error updating user chat id ".concat(t));case 11:return e.next=13,i.json();case 13:return o=e.sent,e.abrupt("return",j(o));case 17:throw e.prev=17,e.t0=e.catch(0),console.error("Error updating chat",e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}var w=n(54);function m(){var e=Object(w.a)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(w.a)(null),p=Object(i.a)(u,2),f=p[0],l=p[1],h=Object(w.a)([]),b=Object(i.a)(h,2),j=b[0],v=b[1],m=Object(w.a)(void 0),x=Object(i.a)(m,2),_=x[0],g=x[1],k=Object(s.b)(),E=Object(o.useCallback)(Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,d(k);case 4:t=e.sent,v(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(e.t0);case 11:return e.prev=11,r(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])}))),[r,l,k,v]),N=Object(o.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,O(t,k);case 4:n=e.sent,g(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(e.t0);case 11:return e.prev=11,r(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}(),[r,l,k,g]);return Object(o.useMemo)((function(){return{loading:n,error:f,getChats:E,userChats:j,updateChat:N,updatedChat:_}}),[n,f,E,N,j,_])}}}]);
//# sourceMappingURL=9.a7742289.chunk.js.map