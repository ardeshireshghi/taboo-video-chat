(this.webpackJsonptaboo=this.webpackJsonptaboo||[]).push([[7],{207:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return N}));var r,i=t(8),a=t(0),c=t(50),s=t(2),o=t(7),u=t(21),l=t(113),j=t(61),b=t(9),d=t(62),h=t(1),f=b.a.div(r||(r=Object(i.a)(["\n  color: ",";\n  font-size: 0.9rem;\n"])),d.a.signupErrorMessage);function O(e){var n=e.onSubmit,t=Object(l.b)(),r=t.control,i=t.handleSubmit,s=Object(a.useState)(!1),o=Object(u.a)(s,2),b=o[0],d=o[1];return Object(h.jsxs)(c.h,{onSubmit:i((function(e){d(!0),n(e)})),children:[Object(h.jsx)(c.i,{children:Object(h.jsx)(l.a,{control:r,name:"name",rules:{required:!0},render:function(e){var n=e.field,t=n.onChange,r=n.onBlur,i=n.value,a=n.name,s=n.ref,o=e.fieldState,u=o.invalid,l=o.isTouched,j=o.error;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("label",{htmlFor:"#name",children:"Name"}),Object(h.jsx)(c.j,{onBlur:r,onChange:t,size:"lg",value:i,name:a,id:"#".concat(a),valid:l&&!u,invalid:u,placeholder:"e.g. John",innerRef:s}),j&&Object(h.jsx)(f,{children:"Please tell us your name"})]})}})}),Object(h.jsx)(c.i,{children:Object(h.jsx)(l.a,{control:r,name:"email",rules:{required:!0,pattern:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/},render:function(e){var n=e.field,t=n.onChange,r=n.onBlur,i=n.value,a=n.name,s=n.ref,o=e.fieldState,u=o.invalid,l=o.isTouched,j=o.error;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("label",{htmlFor:"#email",children:"Email"}),Object(h.jsx)(c.j,{onBlur:r,onChange:t,size:"lg",value:i,name:a,id:"#".concat(a),valid:l&&!u,invalid:u,placeholder:"e.g. john@email.com",innerRef:s}),j&&"required"===j.type&&Object(h.jsx)(f,{children:"Please tell us your email address"}),j&&"pattern"===j.type&&Object(h.jsx)(f,{children:"Email address is not valid"})]})}})}),Object(h.jsx)(c.i,{children:Object(h.jsx)(j.a,{size:"lg",block:!0,pill:!0,type:"submit",theme:"success",isLoading:b,children:"Sign up"})})]})}var m=t(55),p=t(51),x=t.n(p),g=t(52),v=t(25),w=t(81),_=t(53);function k(e){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(x.a.mark((function e(n){var t,r,i,a,c,s,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.email,r=n.name,e.prev=1,(i=Object(_.a)()).apiBaseUrl){e.next=5;break}throw new Error("apiBaseUrl is not set in config");case 5:return e.next=7,fetch("".concat(i.apiBaseUrl,"/api/v1/user"),{method:"POST",body:JSON.stringify({email:t,name:r}),headers:{"content-type":"application/json"}});case 7:if((a=e.sent).ok){e.next=11;break}throw console.error(a),new Error("Error making request to register user");case 11:return e.next=13,a.json();case 13:return c=e.sent,s=c.token,o=c.id,e.abrupt("return",new w.a(o,r,t,new v.a(s)));case 19:throw e.prev=19,e.t0=e.catch(1),console.error("Error registering user",e.t0),e.t0;case 23:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}var E=t(54);var T,S=t(10),C=t(56),I=b.a.div(T||(T=Object(i.a)(["\n  text-align: center;\n  line-height: 2rem;\n"])));function N(){var e=Object(s.g)(),n=function(){var e=Object(E.a)(!1),n=Object(u.a)(e,2),t=n[0],r=n[1],i=Object(E.a)(null),c=Object(u.a)(i,2),s=c[0],o=c[1],l=Object(E.a)(null),j=Object(u.a)(l,2),b=j[0],d=j[1],h=Object(a.useCallback)(function(){var e=Object(g.a)(x.a.mark((function e(n){var t,i,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.email,i=n.name,r(!0),e.prev=2,e.next=5,k({email:t,name:i});case 5:a=e.sent,d(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o(e.t0);case 12:return e.prev=12,r(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(n){return e.apply(this,arguments)}}(),[r,o,d]);return Object(a.useMemo)((function(){return{loading:t,error:s,submit:h,user:b}}),[t,s,h,b])}(),t=n.user,r=n.submit,i=n.error,l=Object(S.b)().setToken;return Object(a.useEffect)((function(){t&&(l(t.accessToken),e.push("/"))}),[t,e,l]),Object(h.jsx)(m.a,{children:Object(h.jsx)(c.p,{children:Object(h.jsx)(c.f,{sm:{size:12,order:2,offset:0},children:Object(h.jsx)(C.a,{children:Object(h.jsxs)(c.d,{children:[Object(h.jsx)(c.e,{size:"lg",children:"Sign up for Taboo"}),Object(h.jsx)(O,{onSubmit:function(e){r(e)}}),Object(h.jsxs)(I,{children:["or ",Object(h.jsx)("br",{}),Object(h.jsx)(o.b,{to:"/login",children:"Log in"})]}),i&&Object(h.jsx)(c.a,{theme:"danger",children:"There was a problem signing you up. Please try later"})]})})})})})}},53:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r="__RUNTIME_CONFIG__",i={};function a(){return r in window?(0===Object.keys(i).length&&(i={apiBaseUrl:window.__RUNTIME_CONFIG__.REACT_APP_API_URL,chatPollIntervalSeconds:window.__RUNTIME_CONFIG__.CHAT_POLL_INTERVAL||10,chatPollingTimeSeconds:300},delete window.__RUNTIME_CONFIG__),i):i}},54:function(e,n,t){"use strict";var r=t(21),i=t(0);n.a=function(e){var n=Object(i.useRef)(!1),t=Object(i.useState)(e),a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(i.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),[c,Object(i.useCallback)((function(e){n.current&&s(e)}),[s])]}},55:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r,i=t(8),a=t(50),c=t(9),s=Object(c.a)(a.g)(r||(r=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 1rem;\n  flex-wrap: wrap;\n  min-height: calc(100% - 92px);\n\n  > *:first-child {\n    flex-basis: auto;\n  }\n"])))},56:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r,i=t(8),a=t(50),c=t(9),s=Object(c.a)(a.c).attrs({outline:!1})(r||(r=Object(i.a)(["\n  width: 400px;\n  max-width: 100%;\n"])))},61:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var r,i,a,c=t(22),s=t(69),o=t(8),u=(t(0),t(68)),l=t(50),j=t(9),b=t(1),d=Object(j.b)(r||(r=Object(o.a)(["\n  0% {\n    transform: rotateZ(0)\n  }\n\n  100% {\n    transform: rotateZ(360deg)\n  }\n"]))),h=j.a.div(i||(i=Object(o.a)(["\n  animation: "," infinite;\n  animation-duration: 1s;\n  animation-timing-function: linear;\n"])),d),f=j.a.div(a||(a=Object(o.a)(["\n  margin-left: 0.5rem;\n  display: inline-block;\n  line-height: 0;\n"]))),O=function(e){var n=e.isLoading,t=void 0!==n&&n,r=e.children,i=Object(s.a)(e,["isLoading","children"]);return Object(b.jsxs)(l.b,Object(c.a)(Object(c.a)({},i),{},{children:[r,t&&Object(b.jsx)(f,{children:Object(b.jsx)(h,{children:Object(b.jsx)(u.a,{})})})]}))}},62:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={primary:"#17c671",signupErrorMessage:"#c4183c"}},81:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t(15),i=function e(n,t,i,a){Object(r.a)(this,e),this.id=n,this.name=t,this.email=i,this.accessToken=a}}}]);
//# sourceMappingURL=7.f56a278d.chunk.js.map