(this.webpackJsonptaboo=this.webpackJsonptaboo||[]).push([[8],{208:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return k}));var r,i=t(0),a=t(50),c=t(21),s=t(8),o=t(113),u=t(61),l=t(9),b=t(62),d=t(1),j=l.a.div(r||(r=Object(s.a)(["\n  color: ",";\n  font-size: 0.9rem;\n"])),b.a.signupErrorMessage);function f(e){var n=e.onSubmit,t=e.submitted,r=void 0!==t&&t,s=Object(o.b)(),l=s.control,b=s.handleSubmit,f=Object(i.useState)(!1),h=Object(c.a)(f,2),O=h[0],m=h[1];return Object(i.useEffect)((function(){r&&m(!1)}),[m,r]),Object(d.jsxs)(a.h,{onSubmit:b((function(e){m(!0),n(e)})),children:[Object(d.jsx)(a.i,{children:Object(d.jsx)(o.a,{control:l,name:"email",rules:{required:!0,pattern:/^[^@ ]+@[^@ ]+\.[^@ .]{2,}$/},render:function(e){var n=e.field,t=n.onChange,r=n.onBlur,i=n.value,c=n.name,s=n.ref,o=e.fieldState,u=o.invalid,l=o.isTouched,b=o.error;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("label",{htmlFor:"#email",children:"Email"}),Object(d.jsx)(a.j,{onBlur:r,onChange:t,size:"lg",value:i,name:c,id:"#".concat(c),valid:l&&!u,invalid:u,placeholder:"e.g. john@email.com",innerRef:s}),b&&"required"===b.type&&Object(d.jsx)(j,{children:"Please tell us your email address"}),b&&"pattern"===b.type&&Object(d.jsx)(j,{children:"Email address is not valid"})]})}})}),Object(d.jsx)(a.i,{children:Object(d.jsx)(u.a,{size:"lg",block:!0,pill:!0,type:"submit",theme:"success",isLoading:O,children:"Send link"})})]})}var h=t(55),O=t(51),m=t.n(O),p=t(52),g=t(53);function v(e){return x.apply(this,arguments)}function x(){return(x=Object(p.a)(m.a.mark((function e(n){var t,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.email,e.prev=1,(r=Object(g.a)()).apiBaseUrl){e.next=5;break}throw new Error("apiBaseUrl is not set in config");case 5:return e.next=7,fetch("".concat(r.apiBaseUrl,"/api/v1/magic-login"),{method:"POST",body:JSON.stringify({email:t}),headers:{"content-type":"application/json"}});case 7:if((i=e.sent).ok){e.next=11;break}throw console.error(i),new Error("Error making request to login user");case 11:e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(1),console.error("Error sending email link to user",e.t0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}var w=t(54);var _=t(56);function k(){var e=function(){var e=Object(w.a)(!1),n=Object(c.a)(e,2),t=n[0],r=n[1],a=Object(w.a)(null),s=Object(c.a)(a,2),o=s[0],u=s[1],l=Object(w.a)("pending"),b=Object(c.a)(l,2),d=b[0],j=b[1],f=Object(i.useCallback)(function(){var e=Object(p.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.email,r(!0),e.prev=2,e.next=5,v({email:t});case 5:j("success"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),u(e.t0),j("error");case 12:return e.prev=12,r(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,8,12,15]])})));return function(n){return e.apply(this,arguments)}}(),[r,u,j]);return Object(i.useMemo)((function(){return{loading:t,error:o,status:d,submit:f}}),[t,o,f,d])}(),n=e.submit,t=e.error,r=e.status;return Object(d.jsx)(h.a,{children:Object(d.jsx)(a.p,{children:Object(d.jsx)(a.f,{sm:{size:12,order:2,offset:0},children:Object(d.jsx)(_.a,{children:Object(d.jsxs)(a.d,{children:[Object(d.jsx)(a.e,{size:"lg",children:"Login with email"}),Object(d.jsx)(f,{onSubmit:function(e){n(e)},submitted:"pending"!==r}),t&&Object(d.jsx)(a.a,{theme:"danger",children:"There was a problem logging you in. Please try later"}),"success"===r&&Object(d.jsx)(a.a,{theme:"primary",children:"An email with the login link has been sent"})]})})})})})}},53:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var r="__RUNTIME_CONFIG__",i={};function a(){return r in window?(0===Object.keys(i).length&&(i={apiBaseUrl:window.__RUNTIME_CONFIG__.REACT_APP_API_URL,chatPollIntervalSeconds:window.__RUNTIME_CONFIG__.CHAT_POLL_INTERVAL||10,chatPollingTimeSeconds:300},delete window.__RUNTIME_CONFIG__),i):i}},54:function(e,n,t){"use strict";var r=t(21),i=t(0);n.a=function(e){var n=Object(i.useRef)(!1),t=Object(i.useState)(e),a=Object(r.a)(t,2),c=a[0],s=a[1];return Object(i.useEffect)((function(){return n.current=!0,function(){n.current=!1}}),[]),[c,Object(i.useCallback)((function(e){n.current&&s(e)}),[s])]}},55:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r,i=t(8),a=t(50),c=t(9),s=Object(c.a)(a.g)(r||(r=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 1rem;\n  flex-wrap: wrap;\n  min-height: calc(100% - 92px);\n\n  > *:first-child {\n    flex-basis: auto;\n  }\n"])))},56:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r,i=t(8),a=t(50),c=t(9),s=Object(c.a)(a.c).attrs({outline:!1})(r||(r=Object(i.a)(["\n  width: 400px;\n  max-width: 100%;\n"])))},61:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var r,i,a,c=t(22),s=t(69),o=t(8),u=(t(0),t(68)),l=t(50),b=t(9),d=t(1),j=Object(b.b)(r||(r=Object(o.a)(["\n  0% {\n    transform: rotateZ(0)\n  }\n\n  100% {\n    transform: rotateZ(360deg)\n  }\n"]))),f=b.a.div(i||(i=Object(o.a)(["\n  animation: "," infinite;\n  animation-duration: 1s;\n  animation-timing-function: linear;\n"])),j),h=b.a.div(a||(a=Object(o.a)(["\n  margin-left: 0.5rem;\n  display: inline-block;\n  line-height: 0;\n"]))),O=function(e){var n=e.isLoading,t=void 0!==n&&n,r=e.children,i=Object(s.a)(e,["isLoading","children"]);return Object(d.jsxs)(l.b,Object(c.a)(Object(c.a)({},i),{},{children:[r,t&&Object(d.jsx)(h,{children:Object(d.jsx)(f,{children:Object(d.jsx)(u.a,{})})})]}))}},62:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r={primary:"#17c671",signupErrorMessage:"#c4183c"}}}]);
//# sourceMappingURL=8.80c299ac.chunk.js.map